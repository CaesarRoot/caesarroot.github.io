---
title: 解码方法
date: 2019-09-05 16:25:53
categories: leetcode
tags: [刷题, 动态规划]
cover_img:
feature_img:
description:
keywords:
---

# 题目

一条包含字母 A-Z 的消息通过以下方式进行了编码：

'A' -> 1
'B' -> 2
...
'Z' -> 26
给定一个只包含数字的非空字符串，请计算解码方法的总数。

示例 1:

输入: "12"
输出: 2
解释: 它可以解码为 "AB"（1 2）或者 "L"（12）。
示例 2:

输入: "226"
输出: 3
解释: 它可以解码为 "BZ" (2 26), "VF" (22 6), 或者 "BBF" (2 2 6) 。

来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/decode-ways

# 思路

这个和走楼梯的那题很像

一段楼梯，一次可以走一个台阶，或者两个台阶，一共有多少种走法

```
dp[i] = dp[i-1] + dp[i-2]
```

这一题多了一个判断，即不是每个dp[i-1]和dp[i-2]都可以累加到dp[i]中，因为有可能有以下两种情况：

1. 对于两个字符的情况

   超过26的不行

   04这种0开头的不行

2. 对于一个字符的情况

   0不行

因此可以容易写出解



# 解法

``` c++
class Solution {
private:
    bool judge(string s){
        return stoi(s)>0 && stoi(s)<27 && s[0] != '0';
    }
public:
    int dp[10000];
    int numDecodings(string s) {
        if(s.size()==1) return judge(s);
        dp[0] = judge(s.substr(0, 1));
        dp[1] = judge(s.substr(0, 2)) + (judge(s.substr(1, 1)) && judge(s.substr(0, 1)));
        for(int i=2; i<s.size(); i++){
            if(judge(s.substr(i, 1)) && s[i]!='0') dp[i] += dp[i-1];
            if(judge(s.substr(i-1, 2))) dp[i] += dp[i-2];
        }
        return dp[s.size()-1];
    }
};
```



简化的写法来自网上：

``` python
class Solution:
    def numDecodings(self, s: str) -> int:
        pp, p = 1, int(s[0] != '0')
        for i in range(1, len(s)):
            pp, p = p, pp * (9 < int(s[i-1:i+1]) <= 26) + p * (int(s[i]) > 0)
        return p
```


i 从索引 1 开始逐渐遍历 s，当前位置对应结果 = 上上次结果(如果 i 位置字符和 i-1 位置字符的组合满足条件；即满足在9-27之间) + 上次结果(如果 s[i] 不为 0)

作者：QQqun902025048
链接：https://leetcode-cn.com/problems/decode-ways/solution/4-xing-python-dp-onshi-jian-o1kong-jian-by-qqqun90/
来源：力扣（LeetCode）





