---
title: N皇后II
date: 2019-11-19 10:09:57
categories: [算法]
tags: [刷题,暴搜]
cover_img:
feature_img:
description:
keywords:
---

# 题目

n 皇后问题研究的是如何将 n 个皇后放置在 n×n 的棋盘上，并且使皇后彼此之间不能相互攻击。

给定一个整数 n，返回所有不同的 n 皇后问题的解决方案。

每一种解法包含一个明确的 n 皇后问题的棋子放置方案，该方案中 'Q' 和 '.' 分别代表了皇后和空位。

示例:

输入: 4
输出: [
 [".Q..",  // 解法 1
  "...Q",
  "Q...",
  "..Q."],

 ["..Q.",  // 解法 2
  "Q...",
  "...Q",
  ".Q.."]
]

来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/n-queens



# 思路

容易想到可以省略行，因为每一行都只能放一个皇后。只要维护一个一维数组column，第i个位置放position表示第position行，i列有皇后。这样其实就已经可以计算出两条对角线了。

但是为了方便，还引入两个一维数组，分别是position-i和position+i，因为对角线上这两个值相同。



# 题解

```c++
#include <iostream>
#include <vector>
#include <string>
#include <set>
using namespace std;

class Solution {
public:
    vector<vector<string>> ans;
    set<int> plus;
    set<int> sub;
    vector<vector<string>> solveNQueens(int n) {
        vector<int> column;
        for(int i = 0; i < n; i++){
            column.push_back(-1);
        }
        plus.clear();
        sub.clear();
        dfs(column, 0);
        return ans;
    }

    void make_ans(vector<int>& column){
        vector<string> one;
        for(int i = 0; i < column.size(); i++){
            for(int j = 0; j < column.size(); j++){
                if(i == column[j]){
                    string s(column.size(), '.');
                    s[j] = 'Q';
                    one.push_back(s);
                }
            }
        }
        ans.push_back(one);
    }

    void dfs(vector<int>& column, int now){
        if(now == column.size()){
            make_ans(column);
        }
        for(int i = 0; i < column.size(); i++){
            if(column[i] == -1){
                if((plus.find(i+now) == plus.end()) && (sub.find(now-i) == sub.end())){
                    column[i] = now;
                    plus.insert(i+now);
                    sub.insert(now-i);
                    dfs(column, now+1);
                    column[i] = -1;
                    plus.erase(i+now);
                    sub.erase(now-i);
                }
            }
        }
    }
};
```

