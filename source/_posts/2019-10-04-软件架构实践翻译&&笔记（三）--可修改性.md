---
title: 软件架构实践翻译&&笔记（三）--可修改性
date: 2019-10-04 09:19:57
categories: [读书笔记, 翻译]
tags: [读书笔记, 架构, 翻译]
cover_img:
feature_img:
description:
keywords:
---

### 可修改性

#### Tactics

##### 1. Reduce the Size of a Module

- Split module：如果一个被修改的模块包含了大量职责，那么修改的代价就会很高。将大的模块细化成许多小的模块可以减少未来修改的平均代价。

##### 2. Increase Cohesion

增加内聚。将职责移交给另一个模块的目的是减少修改原模块职责的副作用 —— 使其不会影响到其他模块。

- Increase semantic coherence：如果A和B的职责不是为了**服务同一个目的而存在**，那么它们应该被放在不同的模块中。可以新建一个模块或是移入一个已经存在的模块。识别需要迁移的职责的一个方法是假设可能发生的变化是如何影响模块的。如果一些职责不会被这些变化影响，那么这些职责应该被迁移。

##### 3. Reduce Coupling

- Encapsulate：封装赋予一个模块显式的接口。**此接口包括了应用编程接口API和它有关的职责**，例如"对于输入的参数进行语法转化，使之转化成内部的表示"。封装是最常见的一种可修改性策略，减少了修改一个模块而影响其他模块的可能性。耦合的强度现在转移到了接口上。这些强度大大减少了，因为接口限制了外部职责和内部模块的交互。外部的职责现在只要直接访问外部的接口就可以和模块交互（间接交互，但是，有些情况是不会改变的，例如依赖服务本身是不会改变的）。接口被设计来增加可修改性，它们应该是抽象的，屏蔽了模块可能改变的细节 —— 隐藏了这些细节。
- Use an intermediary：**使用一个中介打破了依赖**。假设职责A和B之间有依赖关系（例如执行A之前要求先执行B），但是这种依赖关系可以由引入一个中介而被打破。中介的类型取决于依赖的类型。例如，发布订阅中介将会移除数据生产者对于消费者所必要的认知。数据仓库也是同样如此，它分离了数据的读取者和写入者。在面向服务的架构中，服务在一个动态的查找中互相发现，服务的目录就是一个中介。
- Restrict dependencies：**限制一个模块依赖其他的模块。实践中是限制模块的可见性**（当开发者不能看见一个接口的时候，他们不能使用这些接口）**以及权限**。（限制权限，只供有权限的模块使用）这种策略被用于分层的架构中，每层只被允许调用下面的层。（有时仅仅是相邻的下一层）；以及用于包裹器中，外部的实体尽能见到（因此智能依赖）包裹器而不能见到它内部的功能。
- Refactor：如果受到同一个变化影响的两个模块是相同的（至少部分相同），那么就要进行重构。代码重构是敏捷软件开发的一个重要支撑。**作为一个对于多余代码或者过度复杂的代码的清理**，这一思想也被用于软件架构中。常见的职责（以及实现它们的代码）被重构到模块之外并且分配到一个适当的位置。将相同职责的放在一起 —— 也就是让他们成为一个父模块的子模块 —— 可以减少耦合。
- Abstract common services：**两个模块提供的不是相同的服务，但是是相似的服务，那么一个经济的方法是将它们实现一次**，实现成一个抽象的方式。任何一个对于此服务的修改只需要出现在一个地方，减少了修改的代价。一个引入抽象的方法是将描述（和实现）变成模块行为的参数。这种参数是足够简单的（例如关键变量的值），或复杂的（特定语言的复杂语句）。