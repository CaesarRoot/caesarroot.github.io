---
title: c++默认实参和重载
date: 2019-09-24 19:20:05
categories: [c++]
tags: [c++, 语法]
cover_img:
feature_img:
description:
keywords:
---

c++函数的默认实参和重载混合之后的一些情况

编程环境：

Apple clang version 11.0.0 (clang-1100.0.20.17)



## 重复定义

``` c++
#include <iostream>
using namespace std;

int func(int a,int b, int c = 1);

int main()
{
    cout << "func(1,2): " << func(1,2) << endl;

    return 0;
}

int func(int a,int b,int c = 1)  // 这种是错误的，重复定义了默认参数
{
    return a*b*c;
}
```

函数声明中定义了c的默认实参，这时候如果在定义中又给了c默认实参，即使值相等，编译器也是会报错



##无效重载

```c++
#include <iostream>
using namespace std;

int func(int a,int b, int c);

int main()
{
    cout << "func(1,2): " << func(1,2,3) << endl;

    return 0;
}

int func(int a,int b,int c = 0)  // 这种是无效的，因为声明是三个，所以参数必须是三个，默认参数不会用上
{
    return a*b*c;
}
```

这种写法虽然不会报错，但是因为函数的使用要严格按照函数声明，所以实际上默认参数永远不会被用到



## 头文件

``` c++
#include <iostream>
#include "c.h"
using namespace std;

int func(int a,int b=1, int c);

int main()
{
    cout << "func(1,2): " << func(1) << endl;

    return 0;
}

int func(int a,int b,int c)  // 这种是可以的，因为头文件中c是默认参数
{
    return a*b*c;
}

```

c.h:

```c++
int func(int a,int b, int c = 3);
```

这种写法可以，在头文件中给c默认实参，cpp文件中给b默认实参，可以正确调用和赋值



## 顺序颠倒

```c++
#include <iostream>
using namespace std;


int func(int a,int b=1, int c);
int func(int a,int b, int c=0);

int main()
{
    cout << "func(1,2): " << func(1) << endl;

    return 0;
}

int func(int a,int b,int c)  // 这种是不行的，因为放在最开头的那一个函数声明最右边是没有值的；调换顺序之后才可以
{
    return a*b*c;
}
```

考虑到头文件其实是拷贝到文件的开头替换掉 #include，因此实际上第三个例子中c的默认实参是在b之前就给出了，如果颠倒了顺序，就报错



## 总结

1. 默认实参是要从右往左定义的，即右边的一定是默认实参
2. 可以多次声明函数，多次声明的时候，不能再此定义同一个默认实参，即使值相同
3. 多次声明的函数可以增加新的实参，但是也是遵循靠右原则，不能重复，顺序也不能颠倒
4. 函数的定义中不需要写默认实参，写了也没用（会被声明覆盖）